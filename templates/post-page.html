{% extends 'base.html' %} {% block css %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='/css/post-page.css' ) }}" />
{% endblock %}  {% block contenido %}
<script defer src="{{ url_for('static', filename='/js/post-page.js') }}"></script>
<script defer src="{{ url_for('static', filename='/js/sweetalert.js') }}"></script>
{% block js %} {% endblock %}
<main class="main">
    <div class="container-full-post">
        <div class="publication-header">
            <div class="avausuario">
                <img src="{{url_for('static', filename=ava )}}" class="avatar" alt="avatar" />
            </div>
    
            <div class="nom">
                <p>{{postInfo['nombre']}} {{postInfo['apellidos']}}</p>
                <p style="font-size: 12px" class="time">{{postInfo['datepost']}}</p>
    
                {% if session['ema'] == owner %}
                <div class="eli-edit">
                    <button id="delete-post-trigger">
                        Borrar publicación
                    </button>
                    <a href="/editar/{{id_img}}" id="edit-post">
                        Editar publicación
                    </a>
                </div>
                {% endif %}
    
            </div>
        </div>

        <div class="parrafo">
            <p>{{ postInfo['text'] }}</p>
        </div>
        <div class="imagenesfull">
            <figure>
                <img src="{{url_for('static', filename=postInfo['url'])}}" alt="publicación " class="post-image" />
            </figure>
        </div>

    </div>
    <div class="comment_block">
        <!-- Usado por #user para crear un nuevo comentario -->
        <div class="create_new_comment">
            <!-- Avatar del actual usuario -->
            <div id="current_user_avatar">
                <img src="{{url_for('static', filename=ava )}}" />
            </div>
            <!-- the input field -->
            <form class="input_comment" method="POST" id="new-comment-form">
                {{ form_comentar.new_comment_text(placeholder="Escribe aquí tu comentario")}}
                {{ form_comentar.new_comment_btn }}
            </form>
        </div>


        {% for comentario in commentList %}
        <!--comentario-->
        <div class="comment-container" data-comment-id="{{comentario['id']}}">
            <!-- Construir comentario -->
            <div class="user_comment">
                <div class="main-comment">
                    <!-- avatar del usuario actual -->
                    <div class="comment_user_avatar">
                        <img src="{{ url_for('static', filename=comentario['urlavatar'] ) }}" />
                        <div class="name_date">
                            <p>
                                {{comentario['nombre']}} {{comentario['apellidos']}}
                            </p>
                            <p>
                                {{comentario['datecomment']}}
                            </p>
                        </div>
                    </div>
                    <!-- Cuerpo del comentario -->
                    <div class="comment_body">
                        <p>
                            {{comentario['text']}}
                        </p>
                    </div>
                </div>
                <!-- comentario toolbar -->
                <div class="comment_toolbar">
                            {% if session['ema'] == comentario['correo'] %}
                                <button class="delete-comment-trigger" data-comment-id="{{comentario['id']}}" data-image-id="{{id_img}}">
                                    Borrar
                                </button>
                            {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
        <dialog id="delete-comment-modal">
            <div class="inner">
                <p>
                    ¿Estás seguro que quieres eliminar este comentario ?
                </p>
                <div class="modal-buttons">
                    <button class="cancel-delete-comment">
                        Cancelar
                    </button>
                    <a class="confirm-delete-comment">
                        Borrar
                    </a>
                </div>
            </div>
        </dialog>
        <dialog id="delete-post-modal">
            <div class="inner">
                <p>
                    ¿Estás seguro que quieres eliminar esta publicación ?
                </p>
                <div class="modal-buttons">
                    <button class="cancel-delete-post">
                        Cancelar
                    </button>
                    <a class="confirm-delete-post">
                        Borrar
                    </a>
                </div>
            </div>
        </dialog>
    </div>
</main>
{% endblock %}